@()
<!DOCTYPE html>
<html lang="en" ng-app="leaveMessageSystem">
    <head>
        <title>Leave Message System</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="@routes.Assets.versioned("/lib/bootstrap/css/bootstrap.min.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.versioned("images/favicon.png")">
        <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/main.css")">
        <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/loader.css")">
        <link rel="stylesheet" href="@routes.Assets.versioned("/lib/angularjs/angular-csp.css")">

        <script src="@routes.Assets.versioned("/lib/jquery/jquery.min.js")"></script>

        <script src="@routes.Assets.versioned("/lib/bootstrap/js/bootstrap.min.js")"></script>

        <script src="@routes.Assets.versioned("/lib/angularjs/angular.min.js")"></script>
        <script src="@routes.Assets.versioned("/lib/angularjs/angular-route.min.js")"></script>
        <script src="@routes.Assets.versioned("/lib/angularjs/angular-resource.min.js")"></script>
        <script src="@routes.Assets.versioned("javascripts/app.module.js")"></script>
        <script src="@routes.Assets.versioned("javascripts/service/polling.service.js")"></script>
        <script src="@routes.Assets.versioned("javascripts/controller/message-list.controller.js")"></script>
        <script src="@routes.Assets.versioned("javascripts/controller/send-form.controller.js")"></script>
    </head>
    <body>
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="/">Leave Message System</a>
                </div>
            </div>
        </nav>

        <div id="main-content" class="container-fluid">
            <div class="row">
                <div id="message-enter-panel" class="col-md-4">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            Leave message form
                        </div>
                        <div class="panel-body" ng-controller="SendMessageFormController">
                            <div ng-if="failureSaveMessage">
                                <div class="alert alert-danger text-center alert-dismissable fade in">
                                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                                    {{failureSaveMessage}}
                                </div>
                            </div>

                            <div ng-if="successfullySaveMessage" >
                                <div class="alert alert-success text-center alert-dismissable fade in">
                                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                                    {{successfullySaveMessage}}
                                </div>
                            </div>

                            <h4><small>* - Required field</small></h4>

                            <form name="msgForm" novalidate class="css-form">
                                <div class="form-group">
                                    <label for="inputName" ng-class="{'error' : msgForm.uName.$invalid && msgForm.uName.$touched, 'success' : msgForm.uName.$valid, 'default' : msgForm.uName.$pristine}">
                                        Name *
                                    </label>
                                    <input id="inputName" placeholder="Please enter your name..." class="form-control" ng-model="message.userName" name="uName" required pattern="^[A-Z]'?[-a-zA-Z]+$">
                                </div>
                                <div ng-if="msgForm.$submitted || msgForm.uName.$touched">
                                    <p ng-if="msgForm.uName.$error.required" class="error">{{userNameRequiredError}}</p>
                                    <p ng-if="msgForm.uName.$error.pattern" class="error">{{userNamePatternError}}</p>
                                </div>

                                <div class="form-group">
                                    <label for="inputMessageText" ng-class="{'error' : msgForm.msgText.$invalid && msgForm.msgText.$touched, 'success' : msgForm.msgText.$valid, 'default' : msgForm.msgText.$pristine}">
                                        Message text *
                                    </label>
                                    <textarea id="inputMessageText" placeholder="Please enter your text message..." class="form-control" ng-model="message.messageText" name="msgText" required></textarea>
                                </div>
                                <div ng-if="msgForm.$submitted || msgForm.msgText.$touched">
                                    <p ng-if="msgForm.msgText.$error.required" class="error">{{messageTextRequiredError}}</p>
                                </div>

                                <input id="submitBtn" class="btn btn-primary" type="button" value="Leave message" ng-click="send(msgForm)">
                            </form>
                        </div>
                    </div>
                </div>

                <div class="col-md-7 col-md-offset-1">
                    <h2>Messages: </h2>
                    <div id="preloader" class='loader loader1'>
                        <div>
                            <div>
                                <div>
                                    <div>
                                        <div>
                                            <div></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="messages" ng-controller="MessageListController">
                        <div ng-if="messages.length == 0" class="alert alert-info text-center">
                            <span class="glyphicon glyphicon-info-sign"></span> The message list is empty yet. Please leave your first message.
                        </div>
                        <div ng-if="messageListError.apperead" class="alert alert-danger text-center">
                            <span class="glyphicon glyphicon-minus-sign"></span> {{messageListError.detail}}
                        </div>
                        <div ng-repeat="message in messages" class="panel panel-info">
                            <div class="panel-heading">
                                <span class="glyphicon glyphicon-user"></span> {{message.userName}}
                            </div>
                            <div class="panel-body word-wrap">{{message.messageText}}</div>
                            <div class="panel-footer">Date: {{message.date}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
